gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
proba <- links[1:10]
all <- lapply(proba,parser)
all
runif(1, min = 3, max = 11)
parser <- function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "-", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "-", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
all2 <- lapply(links,parser)
proba <- links[10:20]
proba
proba <- links[11:20]
all2 <- lapply(proba,parser)
proba
meta <- read_html("https://www.channelcrawler.com/eng/results/48267/page:18/sort:Channel.subscribers/direction:desc") %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "-", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "-", fixed = TRUE))) %>%
select(X2:X5)
meta <- read_html("https://www.channelcrawler.com/eng/results/48267/page:18/sort:Channel.subscribers/direction:desc") %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "-", .)
meta
read_html("https://www.channelcrawler.com/eng/results/48267/page:18/sort:Channel.subscribers/direction:desc") %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "")
read_html("https://www.channelcrawler.com/eng/results/48267/page:18/sort:Channel.subscribers/direction:desc") %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "-", .)
meta <- read_html("https://www.channelcrawler.com/eng/results/48267/page:18/sort:Channel.subscribers/direction:desc") %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
links <- c(page,
paste0("https://www.channelcrawler.com/eng/results/48267/page:"
,nums,
"/sort:Channel.subscribers/direction:desc"))
links
all2 <- lapply(links,parser)
all2 <- lapply(proba,parser)
View(all)
parser <- function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
all2 <- lapply(links,parser)
View(parser)
function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
parser <- function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
proba <- links[11:20]
all2 <- lapply(proba,parser)
View(all2)
all3 <- lapply(links[21:30],parser)
all4 <- lapply(links[31:40],parser)
all5 <- lapply(links[41:50],parser)
View(all5)
df <- bind_rows(c("all","all2"), .id = "column_label")
df <- bind_rows(all, .id = "column_label")
View(df)
df1 <- bind_rows(all2, .id = "column_label")
df2 <- bind_rows(all3, .id = "column_label")
df3 <- bind_rows(all4, .id = "column_label")
df4 <- bind_rows(all5, .id = "column_label")
topYT <- bind_rows(df,df1,df2,df3,df4)
View(topYT)
save(topYT, file = "./data/topYT.xlsx")
write.csv2(topYT, file = "./data/topYT.csv")
View(topYT)
page  <- "https://channelcrawler.com/eng/results/48267/sort:Channel.subscribers/direction:asc"
nums <- seq(2,50)
links <- c(page,
paste0("https://www.channelcrawler.com/eng/results/48267/page:"
,nums,
"/sort:Channel.subscribers/direction:asc"))
page  <- "https://channelcrawler.com/eng/results/48267/sort:Channel.subscribers/direction:asc"
nums <- seq(2,50)
links <- c(page,
paste0("https://www.channelcrawler.com/eng/results/48267/page:"
,nums,
"/sort:Channel.subscribers/direction:asc"))
parser <- function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
all <- lapply(proba[1:10],parser)
all2 <- lapply(proba[11:20],parser)
all3 <- lapply(links[21:30],parser)
all2 <- lapply(proba[11:20],parser)
View(all)
all3 <- lapply(links[21:30],parser)
View(all3)
links
proba[11:20]
all <- lapply(links[1:10],parser)
all2 <- lapply(links[11:20],parser)
all3 <- lapply(links[21:30],parser)
View(all)
allLIst <- c(all, all2, all3, all4, all5)
df <- bind_rows(allLIst, .id = "column_label")
all4 <- lapply(links[31:40],parser)
all5 <- lapply(links[41:50],parser)
allLIst <- c(all, all2, all3, all4, all5)
df <- bind_rows(allLIst, .id = "column_label")
lowYT <- bind_rows(df,df1,df2,df3,df4)
lowYT
View(lowYT)
View(topYT)
allLIst <- c(all, all2, all3, all4, all5)
df <- bind_rows(allLIst, .id = "column_label")
View(df)
links
parser <- function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
all <- lapply(links[1:10],parser)
all2 <- lapply(links[11:20],parser)
all3 <- lapply(links[21:30],parser)
all4 <- lapply(links[31:40],parser)
all5 <- lapply(links[41:50],parser)
View(all5)
View(all4)
links[11:20]
rm(list=ls())
page  <- "https://channelcrawler.com/eng/results/48267/sort:Channel.subscribers/direction:asc"
nums <- seq(2,50)
links <- c(page,
paste0("https://www.channelcrawler.com/eng/results/48267/page:"
,nums,
"/sort:Channel.subscribers/direction:asc"))
links
links[1:10]
all <- lapply(links[1:10],parser)
parser <- function(url) {
Sys.sleep(runif(1, min = 3, max = 11))
name <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(., "a") %>%
html_attr(.,"title")
link <- read_html(url) %>%
html_nodes(., "h4") %>%
html_nodes(.,"a") %>%
html_attr(.,"href")
genre <- read_html(url) %>%
html_nodes(.,  "b") %>%
.[seq(1,length(.),2)] %>%
html_text()
meta <- read_html(url) %>%
html_nodes(.,"#main-content.container") %>%
html_nodes(.,  "p") %>%
html_nodes(., "small") %>%
.[seq(1,length(.),2)] %>%
html_text()  %>%
str_replace_all(., "[\t]" , "") %>%
gsub("\n", "*", .) %>%
data.frame(do.call("rbind", strsplit(as.character(.), "*", fixed = TRUE))) %>%
select(X2:X5)
subscribers <- meta$X2 %>%
gsub(" Subscribers", "",. ) %>%
gsub("M", "000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
videos <- meta$X3 %>%
gsub(" Videos","",.) %>%
as.numeric()
views <- meta$X4 %>%
gsub(" Total Views","",.) %>%
gsub("B", "00000000",.) %>%
gsub("M","000000",.) %>%
gsub("K","000",.) %>%
gsub("\\.", "",.) %>%
as.numeric()
lastvideo <- meta$X5 %>%
gsub("Latest Video: ", "",.) %>%
mdy("%b %d %Y") %>%
na.omit()
description <- cbind.data.frame(name, genre, subscribers, videos,
views, lastvideo,link, # link_proizvod, # brand_,
stringsAsFactors = FALSE)
return(description)
}
all <- lapply(links[1:10],parser)
View(all)
all2 <- lapply(links[11:20],parser)
View(all2)
inks[11:20]
links[11:20]
links
links[11:20]
all3 <- lapply(links[21:30],parser)
all4 <- lapply(links[31:40],parser)
all5 <- lapply(links[41:50],parser)
allLIst <- c(all, all2, all3, all4, all5)
df <- bind_rows(allLIst, .id = "column_label")
lowYT <- bind_rows(df)
write.csv2(lowYT, file = "./data/lowYT.csv")
View(lowYT)
