AVG,
fill = INTERDAYTIME,
facet = SOURCE_TYPE
)
chart
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Wähleranteil [ % ]", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE) +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_line(colour = "grey80"),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
posts %>%
group_by(SOURCE_TYPE) %>%
mutate(UkBrojObjava = n()) %>%
group_by(DATE, INTERDAYTIME, SOURCE_TYPE) %>%
mutate(PerDay = n()) %>%
ungroup() %>%
group_by(INTERDAYTIME,SOURCE_TYPE) %>%
summarise(AVG = mean(PerDay)) %>%
filter(SOURCE_TYPE != "comment") %>%
arrange(desc(AVG)) -> activePerDay
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Wähleranteil [ % ]", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE) +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_line(colour = "grey80"),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE) +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_line(colour = "grey80"),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_line(colour = "grey80"),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
+ theme( strip.background  = element_blank(),
panel.grid.major = element_line(colour = "grey80"),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() )
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_line(colour = "grey80"),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = eelement_blank(),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_line(size = 0),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Prosjecni dnevni broj objava ", x = NULL, fill = NULL) +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2") +
tit
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2") +
tit
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank() ) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
library(extrafont)
loadfonts(device = "win")
serif
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
text=element_text(size=16,  family="serif")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
text=element_text(size=16,  family="Roboto")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
text=element_text(size=5,  family="Roboto")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
text=element_text(size=9,  family="Roboto")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.x = element_blank(),
text=element_text(size=9,  family="Roboto")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2")
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.x = element_blank(),
text=element_text(size=9,  family="Roboto")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2") +
scale_fill_grey(start=0,end =0.8)
ggplot(activePerDay, aes(x = INTERDAYTIME, y = AVG, fill = INTERDAYTIME, width=0.75)) +
labs(y = "Broj objava ", x = "", title = "Aktivnost na online društvenim medijima U RH",
subtitle = "Dnevni prosjek za cjelokupni medijski prostor u razdoblju 6 mj",
caption = "Izvor: Mediatoolkit | Izradio: Lukos") +
geom_bar(stat = "identity") +
facet_wrap(~SOURCE_TYPE, scales = "free") +
coord_flip() +
guides(fill=FALSE) +
theme_bw() + theme( strip.background  = element_blank(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.ticks = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.x = element_blank(),
text=element_text(size=9,  family="Roboto")) +
theme(legend.position="bottom") +
scale_fill_brewer(palette="Set2") +
scale_fill_grey(start=0,end =0.8)
library(gdeltr2)
devtools::install_github("abresler/gdeltr2")
library(gdeltr2)
df_gkg <-
get_gdelt_codebook_ft_api(code_book = "gkg")
df_gkg <-
get_gdelt_codebook_ft_api(code_book = "gkg")
df_gkg <-
gdeltr2::get_gdelt_codebook_ft_api(code_book = "gkg")
df_gkg <- gdeltr2::get_gdelt_codebook_ft_api(code_book = "gkg")
my_themes <-
c("ECON_WORLDCURRENCIES_CHINESE_YUAN", # stories about china's currency -- god way to find stories about china's economy
"ECON_BUBBLE", # articles about economic bubble
"TAX_FNCACT_BROKER", # articles about brokers of things
"ECON_HOUSING_PRICES", # articls about housing prices
"ECON_BITCOIN", # articles about bitcoin
"ELECTION_FRAUD", # articles about election fraud
"SOC_POINTSOFINTEREST_GOVERNMENT_BUILDINGS", # articles about government buildings
"WB_1277_BANKRUPTCY_AND_LIQUIDATION", # articles about bankruptcy
"WB_639_REPRODUCTIVE_MATERNAL_AND_CHILD_HEALTH", # articles about pregnancy and child health
"WB_2151_CHILD_DEVELOPMENT", # articles about child development
"TAX_FNCACT_BUILDER" # articles about builders
)
random_themes <-
df_gkg %>% pull(idGKGTheme) %>% sample(3)
df_imagetags <-
get_gdelt_codebook_ft_api(code_book = "imagetags")
df_countries <-
get_gdelt_codebook_ft_api(code_book = "countries")
knitr::opts_chunk$set(echo = T, message = F, warning = F)
library(tidyverse)
library(readxl)
library(here)
library(kableExtra)
library(DT)
library(data.table)
library(lubridate)
library(anytime)
library(tidytext)
library(grid)
library(wordcloud)
library(reshape2)
library(ggraph)
library(widyr)
library(topicmodels)
library(ggthemes)
library(reportMD)
library(anytime)
library(scales)
# read in data
path <- "D:/LUKA/Freelance/Mediatoolkit/FULLtxtDATA"
raw <- list.files(path = path , pattern="xlsx")
raw_path <- paste0(path, "/", raw)
all_raw <- map_df(raw_path, read_excel)
all <- as.data.table(all_raw)
all <- all[,DATE := as.Date(DATE,"%Y-%m-%d")][,DATETIME := anytime(paste(DATE,TIME))]
posts <- all[!duplicated(all),]
rm(all,all_raw)
knitr::opts_chunk$set(echo = T, message = F, warning = F)
# how much activity
posts[SOURCE_TYPE == "web", .N]
# how much activity
posts[SOURCE_TYPE == "web", .N]
# how many authors
posts[SOURCE_TYPE == "web", length(unique(posts$AUTHOR))]
# how many domains?
posts[SOURCE_TYPE == "web", length(unique(posts$FROM))]
# how many domains?
posts[SOURCE_TYPE == "web",
.(Number = length(unique(FROM)))]
# how many CRO domains?
posts[SOURCE_TYPE == "web" & grepl(".hr", unique(posts$FROM)),
.(Number = length(unique(FROM)))]
web <- posts[SOURCE_TYPE == "web",]
web[str_detect(web$FROM, ".hr"),.N,
FROM][order(-N),] %>%
datatable(., rownames = FALSE, options = list(pageLength = 5, scrollX=T))
knitr::opts_chunk$set(echo = T, message = F, warning = F)
library(tidyverse)
library(readxl)
library(here)
library(kableExtra)
library(DT)
library(data.table)
library(lubridate)
library(anytime)
library(tidytext)
library(grid)
library(wordcloud)
library(reshape2)
library(ggraph)
library(widyr)
library(topicmodels)
library(ggthemes)
library(reportMD)
library(anytime)
library(scales)
# read in data
path <- "D:/LUKA/Freelance/Mediatoolkit/FULLtxtDATA"
raw <- list.files(path = path , pattern="xlsx")
raw_path <- paste0(path, "/", raw)
all_raw <- map_df(raw_path, read_excel)
all <- as.data.table(all_raw)
all <- all[,DATE := as.Date(DATE,"%Y-%m-%d")][,DATETIME := anytime(paste(DATE,TIME))]
posts <- all[!duplicated(all),]
rm(all,all_raw)
# select media
forum <- posts[SOURCE_TYPE == "forum",]
posts <- as.data.table(posts)
posts %>%
group_by(SOURCE_TYPE) %>%
mutate(UkBrojObjava = n()) %>%
group_by(DATE, INTERDAYTIME, SOURCE_TYPE) %>%
mutate(PerDay = n()) %>%
ungroup() %>%
group_by(INTERDAYTIME,SOURCE_TYPE) %>%
summarise(AVG = mean(PerDay)) %>%
filter(SOURCE_TYPE != "comment") %>%
arrange(desc(AVG)) -> activePerDay
forum[,.N, TITLE][order(-N)] %>% head(50)
forum[,.N, TITLE][order(-N)] %>% head(50)
knitr::opts_chunk$set(echo = T, message = F, warning = F)
forum <- c("Zoran Milanović, predsjednik Republike Hrvatske vol. IV", "Andrej Plenković - predsjednik HDZ-a i predsjednik Vlade RH IV"
forum <- forum[TITLE %in% forum,]
forum <- forum[TITLE %in% forum]
forum[TITLE == "Zoran Milanović, predsjednik Republike Hrvatske vol. IV",]
zm <- forum[TITLE == "Zoran Milanović, predsjednik Republike Hrvatske vol. IV",]
ap <- forum[TITLE == "Andrej Plenković - predsjednik HDZ-a i predsjednik Vlade RH IV",]
write_csv2(zm, "D:/LUKA/Freelance/Mediatoolkit/forumZM.csv")
write_csv2(ap, "D:/LUKA/Freelance/Mediatoolkit/forumAP.csv")
knitr::opts_chunk$set(echo = F, message = F, warning = F)
# read data in (one day worth of data)
one_day_sample <- read_excel(here::here("data/Mediatoolkit/sample.xlsx"))
library(tidyverse)
library(readxl)
library(here)
library(kableExtra)
library(DT)
# read data in (one day worth of data)
one_day_sample <- read_excel(here::here("data/Mediatoolkit/sample.xlsx"))
# size of the data
dim(one_day_sample)
# sneek peak
glimpse(one_day_sample[sample(nrow(one_day_sample)),1:35])
install.packages("pandoc")
install.packages("Rtools")
library(installr)
library(installr)
install.packages("installr")
install.packages(devtools)
install.packages("devtools")
install.packages("Rtools")
install.packages("Rtools")
R.version
install.packages("devtools")
install.packages("pandoc")
rmarkdown::pandoc_version(); packageVersion("knitr")
