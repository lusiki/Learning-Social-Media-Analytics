variables <- read.xlsx("C:/Users/lukas/Dropbox/Članci/Native rad/Native.xlsx", sheetIndex = 1)
variables <- variables[,-c(23,24,25)]# %>% drop_na()
original <- original %>% filter(V1 %in% variables$V1)
dta <- merge(original, variables, by = "V1", all.x = TRUE)
dta$DATE <- as.Date(dta$DATE)
stemmed <- readRDS("C:/Users/Lukas/Dropbox/Mediatoolkit/native_token_stemm.rds")
stemmed <- readRDS("C:/Users/lukas/Dropbox/Članci/Native rad/native_token_stemm.rds")
stemmed <- stemmed %>%
rename("wordp" = "word") %>%
rename("word" = "transformed_column")
rm(dt)
View(variables)
View(dta)
View(original)
View(dta)
# articles over time
daily_counts <- dta %>%
group_by(DATE) %>%
summarise(count = n())
# descriptives
summ <- daily_counts %>%
summarize(min = min(count), max = max(count),
mean = mean(count), q1= quantile(count, probs = 0.25),
median = median(count), q3= quantile(count, probs = 0.75),
sd = sd(count)) %>%
mutate_if(is.numeric, round, digits=2)
summ
# create plot of articles over time
ggplot(data = daily_counts, aes(x = DATE, y = count)) +
geom_line() +
labs(x = "Date", y = "Number of Articles")
>>>>>>> 0e746d60b77243cb41bd3b12ea7f4d02cb4fa0f0
options(htmltools.dir.version = FALSE)
library(tidyverse)
library(readxl)
library(here)
library(kableExtra)
library(DT)
library(purrr)
library(data.table)
library(RMySQL)
conn <- dbConnect(RMySQL::MySQL(), dbname = "determ_all", host = "127.0.0.1",
user = "Lux", password = "Theanswer0207", local_infile = TRUE)
query <- "SELECT * FROM media_space_2022"
data <- dbGetQuery(conn, query)
conn <- dbConnect(RMySQL::MySQL(), dbname = "determ_all", host = "127.0.0.1",
user = "Lux", password = "Theanswer0207", local_infile = TRUE)
query <- "SELECT * FROM media_space_2023"
data <- dbGetQuery(conn, query)
range(data$DATE)
unique(data$SOURCE_TYPE)
length(unique(data$AUTHOR))
# unique titles
length(unique(data$TITLE))
# unique sources
length(unique(data$FROM))
# unique urls
length(unique(data$URL))
# GENERAL OVERVIEW
data %>%
group_by(SOURCE_TYPE) %>%
count() %>%
arrange(desc(n)) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
slice(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
data %>%
group_by(SOURCE_TYPE) %>%
count() %>%
arrange(desc(n)) %>%
mutate_if(is.numeric, format, big.mark = ".")
# GENERAL OVERVIEW
data %>%
group_by(SOURCE_TYPE) %>%
count() %>%
arrange(desc(n)) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
kable(., "html") %>%
kable_styling("striped", full_width = F)
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(8) %>%
slice(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# read data in (one day worth of data)
one_day_sample <- read_excel(here::here("data/Mediatoolkit/sample.xlsx"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(8) %>%
slice(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(8) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(20) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TITLES
data %>%
select(SOURCE_TYPE, TITLE, URL) %>%
sample_n(12) %>%
slice(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TITLES
data %>%
select(SOURCE_TYPE, TITLE, URL) %>%
sample_n(12) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TITLES
data %>%
select(SOURCE_TYPE, TITLE, URL) %>%
sample_n(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# choose variables to investigate
data %>%
filter(SOURCE_TYPE == "facebook") %>%
select(AUTHOR,
REACH,
FOLLOWERS_COUNT,
LIKE_COUNT,
COMMENT_COUNT,
TOTAL_REACTIONS_COUNT,
INFLUENCE_SCORE,
TITLE,
#         MENTION_SNIPPET,
DATE,
TIME) -> fb
fb %>%
group_by(AUTHOR) %>%
summarize(FOLLOWERS_COUNT = max(FOLLOWERS_COUNT)) %>%
ungroup() %>%
arrange(desc(FOLLOWERS_COUNT)) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
slice(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
fb %>%
group_by(AUTHOR) %>%
summarize(FOLLOWERS_COUNT = max(FOLLOWERS_COUNT)) %>%
ungroup() %>%
arrange(desc(FOLLOWERS_COUNT)) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
fb %>%
group_by(AUTHOR) %>%
summarize(FOLLOWERS_COUNT = max(FOLLOWERS_COUNT)) %>%
ungroup() %>%
arrange(desc(FOLLOWERS_COUNT)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
fb %>%
group_by(AUTHOR) %>%
summarise( N = n()) %>%
ungroup() %>%
arrange(desc(N)) %>%
mutate(N = format(N, big.mark = ",")) %>%
head(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
fb %>%
group_by(AUTHOR) %>%
summarise( N = n()) %>%
ungroup() %>%
arrange(desc(N)) %>%
mutate(N = format(N, big.mark = ",")) %>%
head(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# authors with impact
fb %>%
group_by(AUTHOR) %>%
summarise(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
arrange(desc(LIKES)) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
head(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
fb %>%
group_by(TITLE) %>%
summarise(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
arrange(desc(LIKES)) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
head(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
fb %>%
group_by(TITLE) %>%
summarise(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
arrange(desc(LIKES)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# important activity and author
fb %>%
group_by(AUTHOR) %>%
mutate(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
select(AUTHOR, TITLE, LIKES, COMMENT, REACH,REACTIONS ) %>%
arrange(desc(LIKES)) %>%
slice(100) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
fb %>%
group_by(TITLE) %>%
summarise(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
select(AUTHOR, TITLE, LIKES, COMMENT, REACH,REACTIONS ) %>%
arrange(desc(LIKES)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
fb %>%
group_by(TITLE) %>%
summarise(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
select(TITLE, LIKES, COMMENT, REACH,REACTIONS ) %>%
arrange(desc(LIKES)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# important activity and author
fb %>%
group_by(AUTHOR) %>%
mutate(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
REACTIONS = sum(TOTAL_REACTIONS_COUNT)) %>%
select(AUTHOR, TITLE, LIKES, COMMENT, REACH,REACTIONS ) %>%
arrange(desc(LIKES)) %>%
slice(100) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# choose variables to investigate
data %>%
filter(SOURCE_TYPE == "web") %>%
select(FROM_SITE,
AUTHOR,
REACH,
VIRALITY,
LIKE_COUNT,
COMMENT_COUNT,
INFLUENCE_SCORE,
TITLE,
#       MENTION_SNIPPET,
DATE,
TIME) -> web
# most active authors
web %>%
group_by(FROM_SITE) %>%
summarise(N = n()) %>%
arrange(desc(N))  %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
slice(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
web %>%
group_by(FROM_SITE) %>%
summarise(N = n()) %>%
arrange(desc(N))  %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
web %>%
group_by(FROM_SITE) %>%
summarise(N = n()) %>%
arrange(desc(N))  %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
web %>%
group_by(FROM_SITE) %>%
summarise(LIKES = sum(LIKE_COUNT),
COMMENT = sum(COMMENT_COUNT),
REACH = sum(REACH),
VIRALITY = sum(VIRALITY)) %>%
arrange(desc(LIKES)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",")  %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# choose variables to investigate
data %>%
filter(SOURCE_TYPE == "twitter") %>%
select(AUTHOR,
REACH,
FOLLOWERS_COUNT,
FAVORITE_COUNT,
RETWEET_COUNT,
TWEET_TYPE,
TWEET_SOURCE_NAME,
TITLE,
#      MENTION_SNIPPET,
DATE,
TIME) -> twitter
# most important authors
twitter %>%
group_by(AUTHOR) %>%
summarise(FOLLOWERS = max(FOLLOWERS_COUNT)) %>%
arrange(desc(FOLLOWERS))  %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
twitter %>%
group_by(AUTHOR) %>%
summarise(N = n()) %>%
arrange(desc(N))  %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
twitter %>%
group_by(AUTHOR) %>%
summarise(FAVORITE = sum(FAVORITE_COUNT),
RETWEET = sum(RETWEET_COUNT)) %>%
arrange(desc(RETWEET))  %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# originality
twitter %>%
group_by(TWEET_TYPE) %>% # interesting to check per author
summarise(N = n()) %>%
arrange(desc(N)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# technology
twitter %>%
group_by(TWEET_SOURCE_NAME) %>%
summarise(N = n()) %>%
arrange(desc(N)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# most active authors
youtube %>%
group_by(AUTHOR) %>%
count() %>%
arrange(desc(n)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# choose variables to investigate
data %>%
filter(SOURCE_TYPE == "youtube") %>%
select(AUTHOR,
REACH,
LIKE_COUNT,
VIEW_COUNT,
COMMENT_COUNT,
TITLE,
#        MENTION_SNIPPET,
URL,
DATE,
TIME) -> youtube
# most active authors
youtube %>%
group_by(AUTHOR) %>%
count() %>%
arrange(desc(n)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# activity per author
youtube %>%
group_by(AUTHOR) %>%
summarise(REACH = sum(REACH),
LIKE = sum(LIKE_COUNT),
VIEW = sum(VIEW_COUNT),
COMMENTS= sum(COMMENT_COUNT)) %>%
arrange(desc(VIEW)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# breaks down
youtube %>%
group_by(AUTHOR, URL,REACH,LIKE_COUNT, VIEW_COUNT, COMMENT_COUNT) %>%
arrange(desc(VIEW_COUNT)) %>%
head(1000) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# choose variables to investigate
data %>%
filter(SOURCE_TYPE == "forum") %>%
select(FROM_SITE,
TITLE,
#      MENTION_SNIPPET,
DATE,
TIME) -> forum
# not a very good coverage
forum %>%
group_by(FROM_SITE) %>%
count() %>%
arrange(desc(n)) %>%
head(1000) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# choose variables to investigate
data %>%
filter(SOURCE_TYPE == "instagram") %>%
select(FROM_SITE,
TITLE,
AUTHOR,
#      MENTION_SNIPPET,
REACH,
LIKE_COUNT,
COMMENT_COUNT,
SHARE_COUNT,
VIEW_COUNT,
DATE,
TIME) -> instagram
# influencer impact
instagram %>%
group_by(FROM_SITE) %>%
summarise(REACH = sum(REACH),
COMMENT = sum(COMMENT_COUNT),
LIKE = sum(LIKE_COUNT),
VIEW = sum(VIEW_COUNT)) %>%
mutate_if(is.numeric, format, big.mark = ",") %>%
arrange(desc(LIKE)) %>%
head(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# influencer activity
instagram %>%
group_by(FROM_SITE) %>%
count() %>%
arrange(desc(n)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ".")%>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "200px"))
# GENERAL OVERVIEW
data %>%
group_by(SOURCE_TYPE) %>%
count() %>%
arrange(desc(n)) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
kable(., "html") %>%
kable_styling("striped", full_width = F)
# SAMPLE SOME TITLES
data %>%
select(SOURCE_TYPE, TITLE, URL) %>%
sample_n(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "500px"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "200px"))
# SAMPLE SOME TXT
one_day_sample %>%
select(SOURCE_TYPE, MENTION_SNIPPET, URL) %>%
unique(.) %>%
sample_n(100) %>%
datatable(., options = list(scrollX = TRUE, scrollY = "350px"))
# influencer activity
instagram %>%
group_by(FROM_SITE) %>%
count() %>%
arrange(desc(n)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
kadable(., options = list(scrollX = TRUE, scrollY = "200px"))
# influencer activity
instagram %>%
group_by(FROM_SITE) %>%
count() %>%
arrange(desc(n)) %>%
head(100) %>%
mutate_if(is.numeric, format, big.mark = ".") %>%
kable(., options = list(scrollX = TRUE, scrollY = "200px"))
# technology
twitter %>%
group_by(TWEET_SOURCE_NAME) %>%
summarise(N = n()) %>%
arrange(desc(N)) %>%
mutate_if(is.numeric, format, big.mark = ",")  %>%
kable(., options = list(scrollX = TRUE, scrollY = "200px"))
